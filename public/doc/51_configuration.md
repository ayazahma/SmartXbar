# Configuration

## Configuration File Name and Search Path

The SmartXbar allows the configuration of several runtime options like e.g. the audio real-time thread scheduling parameters.
The configuration file is named smartx_config.txt and is per default located in /etc:

    /etc/smartx_config.txt

If it is not located in /etc the current directory is checked for the configuration file. The default location can also be changed by using the environment variable
SMARTX_CFG_DIR, e.g.:

    SMARTX_CFG_DIR=/opt/audio/etc

## Configuration File Syntax

The default configuration file contains the following:

    # The real-time thread scheduling configuration parameters
    # These parameters will be applied to all audio real-time
    # processing threads. The application has to have the permissions
    # to change the scheduling parameters
    # Possible values for policy:
    #     fifo, rr, cfs
    # Possible values for priority:
    #     0-99
    # Values > 0 are only possible for real-time schedulers fifo and rr
    # Possible values for cpu_affinity:
    # 0 - max number cores
    # The real-time threads will only be scheduled on the given cores if the
    # cpu_affinity is set. If it is not set the threads will be scheduled
    # according to the scheduler settings on any core
    [scheduling.rt]
    policy=fifo
    priority=20
    #cpu_affinity=

    # All shared memory files are created using the following group name
    [shm]
    group=ias_audio

#################################################################################
@section scheduling_rt Scheduling

In the **scheduling.rt** section you can configure the scheduling parameters for all audio related threads of the SmartXbar. The **policy** parameter configures the
scheduling policy for all audio threads. Possible values are fifo (SCHED_FIFO), rr (SCHED_RR) or cfs (SCHED_OTHER). cfs is the *complete fair scheduler* of Linux which
also disables real-time scheduling and uses the default Linux scheduler. The **priority** parameter configures the real-time priority of the audio threads in the range
from 0 to 99. The **cpu\_affinity** parameter allows to tie the audio threads to one or more specific CPU cores. Setting the cpu_affinity e.g. to

    cpu_affinity=2 3

will schedule the audio real-time threads only on the CPU cores 2 and 3.

#################################################################################
@section shm_group Shared memory file group name

In the **shm** section you can configure the group name of the created shared memory files. The default group name
is **ias_audio**. All applications that want to stream data to the SmartXbar or want to receive date from it,
have to be member of that group. The default group **ias_audio** is generated by the **ias-audio-common-config**
recipe. If the group is changed in the SmartXbar configuration file, then the **ias-audio-common-config** package
also has to be adapted because the runtime directory for storing named pipes is also generated by using the default
group name **ias_audio**. Further details about the runtime directory can be found in the ias-audio-common ICD.

#################################################################################
@section SmartXConfigParser

SmartXConfigParser is an additional plug-in library available. The library provides a bridge between the Intel Firmware Development Kit (FDK) and the SmartXbar. The FDK provides the customers GUI to setup SmartXbar configuration with great ease and generates the configuration in XML format. The SmartXConfigParser parses the XML generated via FDK and sets up the SmartXbar.

* @ref md_datasheet_smartXConfigParser
